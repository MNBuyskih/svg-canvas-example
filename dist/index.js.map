{"version":3,"file":"index.js","sources":["../src/svgs/differentSvg.ts","../src/svgs/sameSvg.ts","../src/utils/regexp.ts","../src/utils/comparator.ts","../src/utils/hashable.ts","../src/utils/objects.ts","../src/utils/equalable.ts","../src/utils/url.ts","../src/utils/rasterize.ts","../src/index.ts"],"sourcesContent":["export const differentSvg = `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" data-id=\"389343532\"\n     class=\"page start-selection page__cover\" width=\"663.4788599999999px\" height=\"674px\"\n     viewBox=\"0 9.094947017729282e-13 10000 10158.575361391318\">\n    <defs>\n        <style type=\"text/css\">\n@font-face {\n  font-family: \"Mathlete\";\n  font-weight: 400;\n  font-style: normal;\n  src: url(https://mixbook.s3.amazonaws.com/html-fonts/current/mathlete-skinny_latin-basic.woff) format(\"woff\");\n}\n\n@font-face {\n  font-family: \"Ahkio Thin\";\n  font-weight: 400;\n  font-style: normal;\n  src: url(https://mixbook.s3.amazonaws.com/html-fonts/current/ahkio_thin_latin-basic.woff) format(\"woff\");\n}\n        </style>\n    </defs>\n    <g class=\"no-clipping\">\n        <rect x=\"0\" y=\"9.094947017729282e-13\" width=\"10000\" height=\"10158.575361391318\" fill=\"white\"\n              pointer-events=\"none\"></rect>\n        <g>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-54bbcfd2-bb81-11e8-8a17-d78a2935afec\"\n               transform=\"translate(-356.25, -356.26231930434005) rotate(0)\" width=\"10712.5\" height=\"10871.1\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(0, 0)\">\n                    <g clip-path=\"url(#clip-path__5517ab70-bb81-11e8-8a17-d78a2935afec)\">\n                        <defs>\n                            <clipPath id=\"clip-path__5517ab70-bb81-11e8-8a17-d78a2935afec\">\n                                <path d=\" M 0,0 L 10712.5,0 L 10712.5,10871.1 L 0,10871.1 L 0,0 Z\"></path>\n                            </clipPath>\n                        </defs>\n                        <rect class=\"page-item--fill\" width=\"10712.5\" height=\"10871.1\" fill=\"rgba(102, 127, 127, 1)\"\n                              opacity=\"1\"></rect>\n                        <g>\n                            <g>\n                                <image class=\"page_background_item start-selection\"\n                                       transform=\"matrix(1 0 0 1 -2408.8 0)\" preserveAspectRatio=\"none\"\n                                       width=\"15530.099999999999\" height=\"10871.1\" opacity=\"1\"\n                                       xlink:href=\"https://s3.amazonaws.com/mixbook_dev/backgrounds/1893306_609590_l.jpg\"></image>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        <g>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-page_text_item-545323613\" data-id=\"545323613\"\n               transform=\"translate(1008.6050000000023, 6260.66268069566) rotate(0)\" width=\"7982.79\" height=\"3324.05\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(0, 0)\">\n                    <g class=\"no-clipping\">\n                        <rect class=\"page-item--fill\" width=\"7982.79\" height=\"3324.05\" fill=\"rgba(0, 0, 0, 0)\"\n                              opacity=\"0\"></rect>\n                        <g transform=\"translate(52.08333333333333, 52.08333333333333)\" width=\"7878.623333333333\">\n                            <text>\n                                <tspan>\n                                    <tspan x=\"919.5402298850574\" y=\"2481.299033023171\" textLength=\"3546.7980295566504\"\n                                           style=\"font-family: Mathlete; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(255, 255, 255);\">\n                                        Pretty\n                                    </tspan>\n                                    <tspan x=\"5137.748586024448\" y=\"2481.299033023171\" textLength=\"1824.4845831052726\"\n                                           style=\"font-family: Mathlete; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(255, 255, 255);\">\n                                        cat\n                                    </tspan>\n                                </tspan>\n                            </text>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        <g>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-page_text_item-545323664\" data-id=\"545323664\"\n               transform=\"translate(643.0800000000017, 3791.99268069566) rotate(0)\" width=\"8713.84\" height=\"3324.05\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(0, 0)\">\n                    <g class=\"no-clipping\">\n                        <rect class=\"page-item--fill\" width=\"8713.84\" height=\"3324.05\" fill=\"rgba(0, 0, 0, 0)\"\n                              opacity=\"0\"></rect>\n                        <g transform=\"translate(52.08333333333333, 52.08333333333333)\" width=\"8609.673333333334\">\n                            <text>\n                                <tspan>\n                                    <tspan x=\"364.89691662105463\" y=\"2393.723773034118\" textLength=\"4955.756248859698\"\n                                           style=\"font-family: &quot;Ahkio Thin&quot;; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(102, 191, 0);\">\n                                        Pretty\n                                    </tspan>\n                                    <tspan x=\"5648.604269293924\" y=\"2393.723773034118\" textLength=\"2597.8379857690206\"\n                                           style=\"font-family: &quot;Ahkio Thin&quot;; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(102, 191, 0);\">\n                                        cat\n                                    </tspan>\n                                </tspan>\n                            </text>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        <g filter=\"url(#shadow-page_photo_item-1092028258-0)\">\n            <defs>\n                <filter x=\"-0.4\" y=\"-0.382599999755621\" width=\"1.8\" height=\"1.8\"\n                        id=\"shadow-page_photo_item-1092028258-0\">\n                    <feDropShadow stdDeviation=\"156.37500677257776 156.37500677257776\" dx=\"1.065442730222098e-14\"\n                                  dy=\"174.00000244379044\" flood-color=\"rgba(0, 0, 0, 0.92)\"></feDropShadow>\n                </filter>\n            </defs>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-page_photo_item-1092028258\" data-id=\"1092028258\"\n               transform=\"translate(6349.535, 423.2726806956598) rotate(16)\" width=\"3577.4699999999993\"\n               height=\"2504.23\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(136.0000018030405, 136.0000018030405)\">\n                    <g clip-path=\"url(#clip-path__55195920-bb81-11e8-8a17-d78a2935afec)\">\n                        <defs>\n                            <clipPath id=\"clip-path__55195920-bb81-11e8-8a17-d78a2935afec\">\n                                <path d=\" M 0,0 L 3305.4699963939183,0 L 3305.4699963939183,2232.229996393919 L 0,2232.229996393919 L 0,0 Z\"></path>\n                            </clipPath>\n                        </defs>\n                        <rect class=\"page-item--fill\" width=\"3577.4699999999993\" height=\"2504.23\"\n                              fill=\"rgba(0, 0, 0, 0)\" opacity=\"0\"></rect>\n                        <g filter=\"url(#image-effect-page_photo_item-1092028258--1161046036-5519a740-bb81-11e8-8a17-d78a2935afec)\">\n                            <filter id=\"image-effect-page_photo_item-1092028258--1161046036-5519a740-bb81-11e8-8a17-d78a2935afec\"\n                                    width=\"130%\" height=\"130%\">\n                                <feColorMatrix in=\"SourceGraphic\" type=\"matrix\"\n                                               values=\"0.34 0.67 0.12 0 0  0.25 0.67 0.13 0 0  0.17 0.33 0.11 0 0  0 0 0 1 0\"></feColorMatrix>\n                            </filter>\n                            <g>\n                                <image class=\"page_photo_item\"\n                                       transform=\"matrix(-1 1.2246467991473532e-16 -1.2246467991473532e-16 -1 3305.47 2273.03)\"\n                                       preserveAspectRatio=\"none\" width=\"3305.47\" height=\"2313.8300000000004\"\n                                       opacity=\"1\"\n                                       xlink:href=\"https://s3.amazonaws.com/mixbook_dev/photos/918271218_486593_m.jpg\"></image>\n                            </g>\n                        </g>\n                        <g></g>\n                    </g>\n                </g>\n                <path class=\"page-item--border\" transform=\"translate(68.00000090152025, 68.00000090152025)\"\n                      stroke-width=\"136.0000018030405\" stroke=\"#66bf00\" stroke-linecap=\"square\" fill=\"transparent\"\n                      d=\" M 0,0 L 3441.469998196959,0 L 3441.469998196959,2368.2299981969595 L 0,2368.2299981969595 L 0,0 Z\"\n                      style=\"pointer-events: visibleStroke;\"></path>\n            </g>\n        </g>\n        <g class=\"page--folds\">\n            <g class=\"page--folds-dark\"></g>\n            <g class=\"page--folds-light\"></g>\n        </g>\n    </g>\n</svg>\n\n`;","export const sameSvg = `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" data-id=\"389343532\"\n     class=\"page start-selection page__cover\" width=\"663.4788599999999px\" height=\"674px\"\n     viewBox=\"0 9.094947017729282e-13 10000 10158.575361391318\">\n    <defs>\n        <style type=\"text/css\">\n@font-face {\n  font-family: \"Mathlete\";\n  font-weight: 400;\n  font-style: normal;\n  src: url(assets/mathlete-skinny_latin-basic.woff) format(\"woff\");\n}\n        \n@font-face {\n  font-family: \"Ahkio Thin\";\n  font-weight: 400;\n  font-style: normal;\n  src: url(assets/ahkio_thin_latin-basic.woff) format(\"woff\");\n}\n\n        </style>\n    </defs>\n    <g class=\"no-clipping\">\n        <rect x=\"0\" y=\"9.094947017729282e-13\" width=\"10000\" height=\"10158.575361391318\" fill=\"white\"\n              pointer-events=\"none\"></rect>\n        <g>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-54bbcfd2-bb81-11e8-8a17-d78a2935afec\"\n               transform=\"translate(-356.25, -356.26231930434005) rotate(0)\" width=\"10712.5\" height=\"10871.1\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(0, 0)\">\n                    <g clip-path=\"url(#clip-path__5517ab70-bb81-11e8-8a17-d78a2935afec)\">\n                        <defs>\n                            <clipPath id=\"clip-path__5517ab70-bb81-11e8-8a17-d78a2935afec\">\n                                <path d=\" M 0,0 L 10712.5,0 L 10712.5,10871.1 L 0,10871.1 L 0,0 Z\"></path>\n                            </clipPath>\n                        </defs>\n                        <rect class=\"page-item--fill\" width=\"10712.5\" height=\"10871.1\" fill=\"rgba(102, 127, 127, 1)\"\n                              opacity=\"1\"></rect>\n                        <g>\n                            <g>\n                                <image class=\"page_background_item start-selection\"\n                                       transform=\"matrix(1 0 0 1 -2408.8 0)\" preserveAspectRatio=\"none\"\n                                       width=\"15530.099999999999\" height=\"10871.1\" opacity=\"1\"\n                                       xlink:href=\"assets/1893306_609590_l.jpg\"></image>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        <g>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-page_text_item-545323613\" data-id=\"545323613\"\n               transform=\"translate(1008.6050000000023, 6260.66268069566) rotate(0)\" width=\"7982.79\" height=\"3324.05\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(0, 0)\">\n                    <g class=\"no-clipping\">\n                        <rect class=\"page-item--fill\" width=\"7982.79\" height=\"3324.05\" fill=\"rgba(0, 0, 0, 0)\"\n                              opacity=\"0\"></rect>\n                        <g transform=\"translate(52.08333333333333, 52.08333333333333)\" width=\"7878.623333333333\">\n                            <text>\n                                <tspan>\n                                    <tspan x=\"919.5402298850574\" y=\"2481.299033023171\" textLength=\"3546.7980295566504\"\n                                           style=\"font-family: Mathlete; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(255, 255, 255);\">\n                                        Pretty\n                                    </tspan>\n                                    <tspan x=\"5137.748586024448\" y=\"2481.299033023171\" textLength=\"1824.4845831052726\"\n                                           style=\"font-family: Mathlete; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(255, 255, 255);\">\n                                        cat\n                                    </tspan>\n                                </tspan>\n                            </text>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        <g>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-page_text_item-545323664\" data-id=\"545323664\"\n               transform=\"translate(643.0800000000017, 3791.99268069566) rotate(0)\" width=\"8713.84\" height=\"3324.05\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(0, 0)\">\n                    <g class=\"no-clipping\">\n                        <rect class=\"page-item--fill\" width=\"8713.84\" height=\"3324.05\" fill=\"rgba(0, 0, 0, 0)\"\n                              opacity=\"0\"></rect>\n                        <g transform=\"translate(52.08333333333333, 52.08333333333333)\" width=\"8609.673333333334\">\n                            <text>\n                                <tspan>\n                                    <tspan x=\"364.89691662105463\" y=\"2393.723773034118\" textLength=\"4955.756248859698\"\n                                           style=\"font-family: &quot;Ahkio Thin&quot;; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(102, 191, 0);\">\n                                        Pretty\n                                    </tspan>\n                                    <tspan x=\"5648.604269293924\" y=\"2393.723773034118\" textLength=\"2597.8379857690206\"\n                                           style=\"font-family: &quot;Ahkio Thin&quot;; font-weight: 400; font-style: normal; font-size: 2222.22px; fill: rgb(102, 191, 0);\">\n                                        cat\n                                    </tspan>\n                                </tspan>\n                            </text>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        <g filter=\"url(#shadow-page_photo_item-1092028258-0)\">\n            <defs>\n                <filter x=\"-0.4\" y=\"-0.382599999755621\" width=\"1.8\" height=\"1.8\"\n                        id=\"shadow-page_photo_item-1092028258-0\">\n                    <feDropShadow stdDeviation=\"156.37500677257776 156.37500677257776\" dx=\"1.065442730222098e-14\"\n                                  dy=\"174.00000244379044\" flood-color=\"rgba(0, 0, 0, 0.92)\"></feDropShadow>\n                </filter>\n            </defs>\n            <g class=\"page-item\" opacity=\"1\" id=\"page-item-page_photo_item-1092028258\" data-id=\"1092028258\"\n               transform=\"translate(6349.535, 423.2726806956598) rotate(16)\" width=\"3577.4699999999993\"\n               height=\"2504.23\">\n                <g class=\"page-item--positioning-container\" transform=\"translate(136.0000018030405, 136.0000018030405)\">\n                    <g clip-path=\"url(#clip-path__55195920-bb81-11e8-8a17-d78a2935afec)\">\n                        <defs>\n                            <clipPath id=\"clip-path__55195920-bb81-11e8-8a17-d78a2935afec\">\n                                <path d=\" M 0,0 L 3305.4699963939183,0 L 3305.4699963939183,2232.229996393919 L 0,2232.229996393919 L 0,0 Z\"></path>\n                            </clipPath>\n                        </defs>\n                        <rect class=\"page-item--fill\" width=\"3577.4699999999993\" height=\"2504.23\"\n                              fill=\"rgba(0, 0, 0, 0)\" opacity=\"0\"></rect>\n                        <g filter=\"url(#image-effect-page_photo_item-1092028258--1161046036-5519a740-bb81-11e8-8a17-d78a2935afec)\">\n                            <filter id=\"image-effect-page_photo_item-1092028258--1161046036-5519a740-bb81-11e8-8a17-d78a2935afec\"\n                                    width=\"130%\" height=\"130%\">\n                                <feColorMatrix in=\"SourceGraphic\" type=\"matrix\"\n                                               values=\"0.34 0.67 0.12 0 0  0.25 0.67 0.13 0 0  0.17 0.33 0.11 0 0  0 0 0 1 0\"></feColorMatrix>\n                            </filter>\n                            <g>\n                                <image class=\"page_photo_item\"\n                                       transform=\"matrix(-1 1.2246467991473532e-16 -1.2246467991473532e-16 -1 3305.47 2273.03)\"\n                                       preserveAspectRatio=\"none\" width=\"3305.47\" height=\"2313.8300000000004\"\n                                       opacity=\"1\"\n                                       xlink:href=\"assets/918271218_486593_m.jpg\"></image>\n                            </g>\n                        </g>\n                        <g></g>\n                    </g>\n                </g>\n                <path class=\"page-item--border\" transform=\"translate(68.00000090152025, 68.00000090152025)\"\n                      stroke-width=\"136.0000018030405\" stroke=\"#66bf00\" stroke-linecap=\"square\" fill=\"transparent\"\n                      d=\" M 0,0 L 3441.469998196959,0 L 3441.469998196959,2368.2299981969595 L 0,2368.2299981969595 L 0,0 Z\"\n                      style=\"pointer-events: visibleStroke;\"></path>\n            </g>\n        </g>\n        <g class=\"page--folds\">\n            <g class=\"page--folds-dark\"></g>\n            <g class=\"page--folds-light\"></g>\n        </g>\n    </g>\n</svg>\n\n`;","export function scan(content: string, regularExpression: RegExp): string[] {\n  if (!regularExpression.global) {\n    throw new Error(\"regex must have 'global' flag set\");\n  }\n  const result: string[] = [];\n  let match: RegExpExecArray | null;\n  do {\n    match = regularExpression.exec(content);\n    if (match) {\n      result.push(...match.slice(1));\n    }\n  } while (match !== null);\n  return result;\n}\n","/**\n * A type that represents a function that sorts the values A and B.\n *\n * * A should appear before B, if the returned value is less than 0.\n * * A should appear after B, if the returned value is greater than 1.\n * * A and B are equal, if the returned value is 0.\n */\nexport type Comparator<T> = (a: T, b: T) => number;\n\ntype Predicate<T> = (a: T, b: T) => boolean;\n\n/**\n * A comparator that sorts strings or numbers in ascending order.\n *\n * @see {@link desc}\n */\nexport function asc<T extends string | number>(a: T, b: T): number {\n  if (typeof a === \"number\" && typeof b === \"number\") {\n    return a - b;\n  } else {\n    return a < b ? -1 : a === b ? 0 : 1;\n  }\n}\n\n/**\n * A comparator that sorts strings or numbers in descending order.\n *\n * @see {@link asc}\n */\nexport function desc<T extends string | number>(a: T, b: T): number {\n  if (typeof a === \"number\" && typeof b === \"number\") {\n    return b - a;\n  } else {\n    return b < a ? -1 : a === b ? 0 : 1;\n  }\n}\n\n/**\n * Returns a comparator that invokes `then` if A and B are greater than the given value. Otherwise\n * the `or` comparator is invoked.\n *\n * @see {@link lessThan}\n */\nexport function moreThan(value: number, then: Comparator<number>, or: Comparator<number>): Comparator<number> {\n  return ifThen((a, b) => a > value && b > value, then, or);\n}\n\n/**\n * Returns a comparator that invokes `then` if A and B are less than the given value. Otherwise\n * the `or` comparator is invoked.\n *\n * @see {@link moreThan}\n */\nexport function lessThan(value: number, then: Comparator<number>, or: Comparator<number>): Comparator<number> {\n  return ifThen((a, b) => a < value && b < value, then, or);\n}\n\n/**\n * Returns a comparator that will ensure the given value always appears before any other value.\n *\n * @see {@link deprioritize}\n */\nexport function prioritize<T>(value: T, or: Comparator<T>): Comparator<T> {\n  return (a, b) => {\n    if (a === value) {\n      return -1;\n    } else if (b === value) {\n      return 1;\n    } else {\n      return or(a, b);\n    }\n  };\n}\n\n/**\n * Returns a comparator that will ensure the given value always appears after any other value.\n *\n * @see {@link prioritize}\n */\nexport function deprioritize<T>(value: T, or: Comparator<T>): Comparator<T> {\n  return (a, b) => {\n    if (a === value) {\n      return 1;\n    } else if (b === value) {\n      return -1;\n    } else {\n      return or(a, b);\n    }\n  };\n}\n\n/**\n * Returns a comparator that invokes `then` if the given predicate returns `true`. Otherwise `or`\n * is invoked.\n */\nexport function ifThen<T>(predicate: Predicate<T>, then: Comparator<T>, or: Comparator<T>): Comparator<T> {\n  return (a, b) => (predicate(a, b) ? then(a, b) : or(a, b));\n}\n","export interface Hashable {\n  hashCode: () => number;\n}\n\nexport function hash(arg: any): number {\n  if (typeof arg === \"number\") {\n    return stringHash(arg.toString());\n  } else if (typeof arg === \"string\") {\n    return stringHash(arg);\n  } else if (typeof arg === \"undefined\") {\n    return 1534124234;\n  } else if (typeof arg === \"boolean\") {\n    return stringHash(arg.toString());\n  } else if (typeof arg === \"function\") {\n    return 4325431234;\n  } else if (typeof arg === \"object\") {\n    if (arg instanceof Date) {\n      return stringHash((arg as Date).getTime().toString());\n    } else if (arg === null) {\n      return 2345174394;\n    } else if (isHashable(arg)) {\n      return arg.hashCode();\n    } else {\n      return hashObject(arg);\n    }\n  } else {\n    // This is probably a Symbol, fallback to using toString()\n    return stringHash(arg.toString());\n  }\n}\n\nexport function isHashable(obj: any): obj is Hashable {\n  return obj != null && typeof obj.hashCode === \"function\";\n}\n\nfunction stringHash(str: string): number {\n  if (str.length === 0) {\n    return 0;\n  } else {\n    let aHash = 0;\n    for (let i = 0; i < str.length; i += 1) {\n      const chr = str.charCodeAt(i);\n      aHash = (aHash << 5) - aHash + chr;\n      aHash |= 0;\n    }\n    return aHash;\n  }\n}\n\nfunction hashObject(obj: {[key: string]: any}): number {\n  let result = 0;\n  for (const property in obj) {\n    if (obj.hasOwnProperty.call(obj, property)) {\n      result += stringHash(property + hash(obj[property]));\n    }\n  }\n\n  return result;\n}\n","export function entries<T>(obj: T): [keyof T, T[keyof T]][] {\n  const arr: [keyof T, T[keyof T]][] = [];\n  for (const key in obj) {\n    /* istanbul ignore else */\n    if (obj.hasOwnProperty == null || (obj.hasOwnProperty(key) && obj.propertyIsEnumerable(key))) {\n      arr.push([key, obj[key]]);\n    }\n  }\n  return arr;\n}\n","declare const _: any;\nimport {isHashable} from \"utils/hashable\";\nimport {Keyable} from \"utils/keyable\";\nimport {entries} from \"utils/objects\";\n\nexport interface Equatable {\n  equals(object: any): boolean;\n}\n\n/**\n * Checks that `a` and `b` are deeply equal. This function will check if an object or an\n * element inside a collection (Array, ES6 Map, ES6 Set) implements the `Equatable`\n * interface. If it does, then it invoke the object's `equals` method. Otherwise, this falls\n * back to using a standard `===` check.\n *\n * When comparing objects, this function will not check values defined on the object's\n * prototype.\n */\nexport function equals(a: any, b: any): boolean {\n  if (a === b) {\n    return true;\n  } else if (a != null) {\n    if (isHashable(a) && isHashable(b) && a.hashCode() !== b.hashCode()) {\n      return false;\n    } else if (isEquatable(a)) {\n      return a.equals(b);\n    } else if (a instanceof Array && b instanceof Array) {\n      return areArraysEqual(a, b);\n    } else if (a instanceof Map && b instanceof Map) {\n      return areMapsEqual(a, b);\n    } else if (a instanceof Set && b instanceof Set) {\n      return areSetsEqual(a, b);\n    } else if (isPlainObject(a) && isPlainObject(b)) {\n      return arePlainObjectsEqual(a, b);\n    } else {\n      return _.isEqual(a, b);\n    }\n  } else {\n    return _.isEqual(a, b);\n  }\n}\n\nexport function shallowEquals(a: Maybe<Record<string, any>>, b: Maybe<Record<string, any>>): boolean {\n  a = a || {};\n  b = b || {};\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  if (!equals(aKeys, bKeys)) {\n    return false;\n  } else {\n    for (const key of aKeys) {\n      if (a[key] !== b[key]) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfunction isEquatable(obj: any): obj is Equatable {\n  return obj != null && typeof obj.equals === \"function\";\n}\n\nfunction areArraysEqual(a: any[], b: any[]): boolean {\n  if (a.length === b.length) {\n    return isAllValuesEqualForKeys(a, index => equals(a[index], b[index]));\n  } else {\n    return false;\n  }\n}\n\nfunction areMapsEqual(a: Map<any, any>, b: Map<any, any>): boolean {\n  if (a.size === b.size) {\n    return isAllValuesEqualForKeys(a, key => equals(a.get(key), b.get(key)));\n  } else {\n    return false;\n  }\n}\n\nfunction areSetsEqual(a: Set<any>, b: Set<any>): boolean {\n  if (a.size === b.size) {\n    // This looks non-optimal, but we need to iterate over all the values in the\n    // set to use our version of `equals` instead of `===`.\n    return isAllValuesEqualForKeys(a, keyA => {\n      return isSomeValuesEqualForKeys(b, keyB => equals(keyA, keyB));\n    });\n  } else {\n    return false;\n  }\n}\n\n/**\n * Iterates over all keys in `keyable` and passes it to the provided equals function.\n * Returns `true` if all keys passed to `equals` is true.\n */\nfunction isAllValuesEqualForKeys<K>(keyable: Keyable<K>, equalsFn: (key: K) => boolean): boolean {\n  const keys = keyable.keys();\n\n  let result = keys.next();\n  while (!result.done) {\n    if (!equalsFn(result.value)) {\n      return false;\n    }\n    result = keys.next();\n  }\n\n  return true;\n}\n\n/**\n * Iterates each key in `keyable` and passes it to the provided equals function.\n * Returns `true` if once `equals` returns `true`. Otherwise `false.\n */\nfunction isSomeValuesEqualForKeys<K>(keyable: Keyable<K>, equalsFn: (key: K) => boolean): boolean {\n  const keys = keyable.keys();\n\n  let result = keys.next();\n  while (!result.done) {\n    if (equalsFn(result.value)) {\n      return true;\n    }\n    result = keys.next();\n  }\n\n  return false;\n}\n\nfunction arePlainObjectsEqual(a: any, b: any): boolean {\n  const keys1 = entries(a);\n  const keys2 = entries(b);\n  if (keys1.length === keys2.length) {\n    for (const key1 of keys1) {\n      const [key] = key1;\n      if (!equals(a[key], b[key])) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction isPlainObject(obj: any): boolean {\n  return typeof obj === \"object\" && !(obj instanceof Date);\n}\n","import * as Comparator from \"utils/comparator\";\nimport {equals} from \"utils/equalable\";\n\nexport interface Params {\n  [propName: string]: string | null;\n}\n\ninterface Parts {\n  scheme?: string;\n  host?: string;\n  port?: string;\n  path?: string;\n  params?: Params;\n}\n\n/**\n * Utility class for parsing and building URLs.\n */\nexport class Url {\n  constructor(private parts: Parts) {\n  }\n\n  public static fromString(input: string): Url {\n    const parsed = {} as Parts;\n\n    const schemeMatcher = /^(\\w+):\\/\\//;\n    const schemeMatch = schemeMatcher.exec(input);\n    if (schemeMatch != null) {\n      parsed.scheme = schemeMatch[1];\n      input = input.substr(schemeMatch[0].length);\n    }\n\n    const hostMatcher = /^(?:\\/\\/)?(?!:\\d+|\\/)(.+?)(\\/|:|\\?|$)/;\n    const hostMatch = hostMatcher.exec(input);\n    if (hostMatch != null) {\n      parsed.host = hostMatch[1];\n      input = input.replace(/^\\/\\//, \"\").substr(parsed.host.length);\n    }\n\n    const portMatcher = /^:(\\d+)/;\n    const portMatch = portMatcher.exec(input);\n    if (portMatch != null) {\n      parsed.port = portMatch[1];\n      input = input.substr(parsed.port.length + 1);\n    }\n\n    const paramsMatcher = /\\?(.+)$/;\n    const paramsMatch = paramsMatcher.exec(input);\n    if (paramsMatch != null) {\n      parsed.params = parsed.params || {};\n      paramsMatch[1].split(\"&\").map((param: string) => param.split(\"=\")).forEach(([k, v]) => {\n        // decodeURIComponent doesn't touch pluses, which encode spaces\n        parsed.params![k] = decodeURIComponent(v).replace(/\\+/g, \" \");\n      });\n      input = input.replace(paramsMatcher, \"\");\n    } else {\n      parsed.params = {};\n    }\n\n    parsed.path = normalizePath(input);\n\n    return new Url(parsed);\n  }\n\n  public appendPath(path: string): Url {\n    const normalizedPath = path.replace(/^(\\/+)/, \"\");\n    const newPath = `/${this.pathAsArray.concat(normalizedPath).join(\"/\")}`;\n    return new Url({...this.parts, path: newPath});\n  }\n\n  public replacePath(path: string): Url {\n    const normalizedPath = normalizePath(path);\n    return new Url({...this.parts, path: normalizedPath});\n  }\n\n  public appendParams(params: Params): Url {\n    const newParams = {...this.parts.params || {}, ...params};\n    return new Url({...this.parts, params: newParams});\n  }\n\n  public equals(other: any): boolean {\n    return other instanceof Url && equals(this.parts, other.parts);\n  }\n\n  public toString(): string {\n    let result = \"\";\n    if (this.scheme.length > 0) {\n      result += `${this.scheme}://`;\n    }\n    if (this.host.length > 0) {\n      if (this.scheme.length === 0) {\n        result += \"//\";\n      }\n      result += this.host;\n    }\n    if (this.port.length > 0) {\n      result += `:${this.port}`;\n    }\n    if (this.path.length > 0) {\n      result += this.path;\n    }\n    if (Object.keys(this.params).length > 0) {\n      result +=\n          \"?\" +\n          Object.keys(this.params)\n              .sort(Comparator.asc)\n              .reduce((memo: string[], key: string) => {\n                if (this.params[key] != null) {\n                  memo.push(`${key}=${encodeURIComponent(this.params[key]!)}`);\n                } else {\n                  memo.push(`${key}`);\n                }\n                return memo;\n              }, [])\n              .join(\"&\");\n    }\n    return result;\n  }\n\n  get host(): string {\n    return this.parts.host || \"\";\n  }\n\n  get scheme(): string {\n    return this.parts.scheme || \"\";\n  }\n\n  get port(): string {\n    return this.parts.port || \"\";\n  }\n\n  get path(): string {\n    return this.parts.path || \"\";\n  }\n\n  get baseName(): string {\n    const pathArray = this.pathAsArray;\n    return pathArray.length > 0 ? pathArray[pathArray.length - 1] : \"\";\n  }\n\n  get extension(): string {\n    const parts = this.baseName.split(\".\");\n    return parts.length > 1 ? parts[parts.length - 1] : \"\";\n  }\n\n  get params(): Params {\n    return {...this.parts.params || {}};\n  }\n\n  get pathAsArray(): string[] {\n    return this.path.split(\"/\").filter(str => str.length > 0);\n  }\n}\n\nfunction normalizePath(path: string): string {\n  let result = path.replace(/(\\/+)/, \"/\");\n  if (result.length > 0 && result[0] !== \"/\") {\n    result = `/${result}`;\n  }\n  return result;\n}\n","import {scan} from \"utils/regexp\";\nimport {Url} from \"utils/url\";\n\nexport class RasterizerError extends Error {\n  constructor(message?: string) {\n    super(message);\n  }\n}\n\ntype Dimensions = { width: number, height: number };\ntype Client = { fetch: (url: string) => Promise<Response> }\n\nconst contentCache: { [url: string]: Promise<string> } = {};\n\n// Any images in the SVG document need to be converted to data URIs\n// for \"security reasons\". This will replace any image URLs as data\n// URIs, then draw the SVG doc to a canvas context.\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nexport async function rasterizeSVG(\n    svg: string,\n    dimensions: Dimensions,\n    client: Client,\n    canCache: boolean,\n    format: string = \"image/png\",\n): Promise<string> {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = dimensions.width;\n  canvas.height = dimensions.height;\n  const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n  const svg2 = await resolveCssImports(svg, client, canCache);\n  const uris = await getSvgAssetsAsDataUris(svg2, client, canCache);\n  const svg3 = await replaceUrlsWithDataUris(svg2, uris);\n  const img = await loadSvgAsImage(svg3);\n  return new Promise<string>((resolve, _) => {\n    // Let's skip one more frame, to make sure Chrome won't crash (and it can!)\n    // Try to open that in Chrome to see: http://codepen.io/astashov/pen/ZBzaem\n    setTimeout(() => {\n      context.drawImage(img, 0, 0);\n      resolve(canvas.toDataURL(format));\n    }, 0);\n  });\n}\n\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nasync function resolveCssImports(svg: string, client: Client, canCache: boolean): Promise<string> {\n  const matcher = /@import url\\(([^)]+)\\)/g;\n  const matches = scan(svg, matcher);\n  const requests = matches.map(url => {\n    if (contentCache[url]) {\n      // return contentCache[url];\n    }\n    return contentCache[url] = getContent(url, client, canCache)\n        .then(r => r.text());\n  });\n  const contents = await Promise.all(requests);\n  return contents.reduce<string>((newSvg, content, i) => {\n    const importUrl = Url.fromString(matches[i]);\n    const importPath = importUrl.pathAsArray.slice(0, importUrl.pathAsArray.length - 1).join(\"/\");\n    content = content.replace(/src: url\\((.+?)\\)/g, (_, url) => {\n      url = url.replace(/['\"]/g, \"\");\n      // in case the font urls are relative, make them absolute\n      if (url.match(/^[^\\/]/)) {\n        url = importUrl.replacePath(importPath).appendPath(url).toString();\n      }\n      return `src: url(${url})`;\n    });\n    return newSvg.replace(`@import url(${matches[i]});`, content);\n  }, svg);\n}\n\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nfunction loadSvgAsImage(svg: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const blob = new Blob([svg], {type: \"image/svg+xml\"});\n    const url = URL.createObjectURL(blob);\n\n    const img = new Image();\n    img.onload = () => {\n      // Pawel: Safari requires this to properly render images\n      setTimeout(() => {\n        resolve(img);\n        URL.revokeObjectURL(url);\n      }, 300);\n    };\n    img.onerror = event => {\n      reject(new RasterizerError(\"Failed to load image from \" + (event.target as HTMLImageElement).src));\n      URL.revokeObjectURL(url);\n    };\n    img.src = url;\n  });\n}\n\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nfunction replaceUrlsWithDataUris(svg: string, dataUris: string[][]): string {\n  return dataUris.reduce((doc, [url, dataUri]) => {\n    return doc.replace(url, dataUri);\n  }, svg);\n}\n\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nfunction getSvgAssetsAsDataUris(svg: string, client: Client, canCache: boolean): Promise<string[][]> {\n  const imageMatcher = /xlink:href=\"(.+?)\"/g;\n  const fontMatcher = /src: url\\((.+?)\\)/g;\n  const matches = [imageMatcher, fontMatcher].reduce<string[]>((memo, matcher) => {\n    return memo.concat(scan(svg, matcher));\n  }, []);\n  const requests = matches.map(url => getDataUri(url, client, canCache));\n\n  return Promise.all(requests).then(urls => {\n    return urls.map((url, index) => [matches[index], url]);\n  });\n}\n\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nfunction getDataUri(url: string, client: Client, canCache: boolean): Promise<string> {\n  if (contentCache[url]) {\n    // return contentCache[url];\n  }\n  return contentCache[url] = getContent(url, client, canCache).then(r => r.blob())\n      .then(blob => readBlobAsDataUrl(blob, url));\n}\n\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nfunction getContent(url: string, client: Client, canCache: boolean): Promise<Response> {\n  if (!canCache) {\n    // Pawel: On chrome, with enabled prefetch caching S3 doesn't expose right CORS tags and this causes\n    // Chrome to be confused about CORS, we have decided that the best workaround for this for now (until S3 is fixed)\n    // is to add nounce to every request we are fetching.\n    const nonce = Math.floor(Math.random() * new Date().getTime()).toString();\n    const params: Record<string, string | null> = {};\n    params[nonce] = null;\n    url = Url.fromString(url).appendParams(params).toString();\n  }\n\n  return client\n      .fetch(url)\n      .catch(error => {\n        throw new RasterizerError(\"Fetch error for url \" + url);\n      });\n}\n\n/* istanbul ignore next: ignore for now, hard to test in tsnode */\nfunction readBlobAsDataUrl(blob: Blob, debugUrl: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      resolve(reader.result as string);\n    };\n    reader.onerror = () => {\n      reject(new RasterizerError(\"FileReader error for url \" + debugUrl));\n    };\n    reader.readAsDataURL(blob);\n  });\n}\n","import {differentSvg} from \"svgs/differentSvg\";\nimport {sameSvg} from \"svgs/sameSvg\";\nimport {rasterizeSVG} from \"utils/rasterize\";\n\nexport default async function (svgType: \"sameDomain\" | \"differentDomain\") {\n  const svg = svgType === \"sameDomain\" ? sameSvg : differentSvg;\n  loadSvg(svg);\n\n  console.time(svgType);\n  try {\n    await renderSvg(svg);\n  } catch (e) {\n    alert(e.toString());\n  }\n  console.timeEnd(svgType);\n}\n\nfunction getTarget(target: string) {\n  const div = document.querySelector(target);\n  if (!div) {\n    throw new Error(`Can't find target ${target}`);\n  }\n  return div;\n}\n\nfunction loadSvg(svg: string) {\n  const div = getTarget(\"#target_svg\");\n\n  div.innerHTML = svg;\n}\n\nasync function renderSvg(svg: string) {\n  const width = 663;\n  const height = 674;\n  const src = await rasterizeSVG(svg, {width, height}, {\n    fetch: (url) => {\n      return fetch(url);\n    },\n  }, true);\n\n  const canvas = getTarget(\"#target_canvas\") as HTMLCanvasElement;\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n  context.clearRect(0, 0, width, height);\n\n  const img = getTarget(\"#target_image\") as HTMLImageElement;\n  img.onload = () => {\n    context.drawImage(img, 0, 0);\n  };\n  img.src = src;\n}"],"names":["Comparator.asc","tslib_1.__extends"],"mappings":"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"}